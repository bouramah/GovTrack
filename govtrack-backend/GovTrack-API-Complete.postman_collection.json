{
  "info": {
    "_postman_id": "govtrack-complete-v2",
    "name": "GovTrack API - Collection Compl√®te v2.0",
    "description": "üèõÔ∏è **API GovTrack** - Syst√®me complet de gestion d'instructions gouvernementales\n\n## üîê Permissions (3 Niveaux)\n- **Admin** (`view_all_projects`) : Tous les projets + filtres complets\n- **Directeur** (`view_my_entity_projects`) : Projets de son entit√©\n- **Employ√©** (`view_my_projects`) : Ses projets personnels\n\n## üöÄ Guide\n1. Login via Auth section\n2. Token auto-stock√©\n3. Testez diff√©rents niveaux\n\n## ‚úÖ Fonctionnalit√©s\n- 70+ endpoints s√©curis√©s\n- Permissions granulaires\n- Validation m√©tier compl√®te\n- Tests automatiques",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://127.0.0.1:8000/api/v1",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "project_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "task_id",
      "value": "1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üîê AUTHENTIFICATION",
      "item": [
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Admin login success\", () => {",
                  "    pm.response.to.have.status(200);",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.success).to.be.true;",
                  "    pm.globals.set(\"access_token\", data.data.token);",
                  "    console.log(\"üîë Admin token stored\");",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"admin@govtrack.gov\",\"password\":\"password\"}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "üîì Connexion administrateur - Acc√®s complet"
          }
        },
        {
          "name": "Login Directeur",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"amadou.diop@govtrack.gov\",\"password\":\"password\"}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "üè¢ Directeur d'entit√© - Projets de son entit√©"
          }
        },
        {
          "name": "Login Employ√©",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"fatou.fall@govtrack.gov\",\"password\":\"password\"}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "üë§ Employ√© - Projets personnels uniquement"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/auth/me",
            "description": "üìã Info utilisateur connect√©"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/logout",
            "description": "üö™ D√©connexion"
          }
        }
      ]
    },
    {
      "name": "üìä PROJETS & DASHBOARD",
      "item": [
        {
          "name": "Tableau de Bord",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/projets/tableau-bord",
            "description": "üìà Dashboard intelligent selon permissions - Nouvelles infos de permissions"
          }
        },
        {
          "name": "Lister Projets",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/projets?page=1&per_page=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "10"
                },
                {
                  "key": "statut",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "porteur_id",
                  "value": "",
                  "disabled": true,
                  "description": "Admin/Directeur seulement"
                }
              ]
            },
            "description": "üìã Liste avec filtrage selon permissions (NOUVEAU SYST√àME)"
          }
        },
        {
          "name": "Cr√©er Projet",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"titre\": \"Test API - Nouveau Projet\",\n  \"description\": \"Projet test via Postman\",\n  \"type_projet_id\": 1,\n  \"porteur_id\": 2,\n  \"donneur_ordre_id\": 1,\n  \"date_debut_previsionnelle\": \"2025-02-01\",\n  \"date_fin_previsionnelle\": \"2025-03-01\"\n}"
            },
            "url": "{{baseUrl}}/projets",
            "description": "‚ûï Cr√©er avec validation SLA automatique"
          }
        },
        {
          "name": "Changer Statut Projet",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nouveau_statut\": \"en_cours\",\n  \"commentaire\": \"D√©marrage du projet\"\n}"
            },
            "url": "{{baseUrl}}/projets/{{project_id}}/changer-statut",
            "description": "üîÑ Transitions valid√©es avec historique"
          }
        },
        {
          "name": "Niveau Ex√©cution (NOUVEAU)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"niveau_execution\": 45,\n  \"commentaire\": \"Avancement significatif\"\n}"
            },
            "url": "{{baseUrl}}/projets/{{project_id}}/niveau-execution",
            "description": "üìä NOUVEAU: Endpoint d√©di√© niveau ex√©cution"
          }
        }
      ]
    },
    {
      "name": "‚úÖ T√ÇCHES",
      "item": [
        {
          "name": "Lister T√¢ches",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/taches?projet_id={{project_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "taches"
              ],
              "query": [
                {
                  "key": "projet_id",
                  "value": "{{project_id}}"
                }
              ]
            },
            "description": "üìã T√¢ches selon permissions projets"
          }
        },
        {
          "name": "Mes T√¢ches",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/taches/mes-taches",
            "description": "üë§ T√¢ches personnelles utilisateur"
          }
        },
        {
          "name": "Cr√©er T√¢che",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"titre\": \"Test API - Nouvelle T√¢che\",\n  \"description\": \"T√¢che test via Postman\",\n  \"projet_id\": {{project_id}},\n  \"responsable_id\": 3,\n  \"priorite\": \"moyenne\",\n  \"date_debut_previsionnelle\": \"2025-02-05\",\n  \"date_fin_previsionnelle\": \"2025-02-10\"\n}"
            },
            "url": "{{baseUrl}}/taches",
            "description": "‚ûï Cr√©er nouvelle t√¢che"
          }
        },
        {
          "name": "Changer Statut T√¢che",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nouveau_statut\": \"en_cours\",\n  \"niveau_execution\": 25,\n  \"commentaire\": \"D√©marrage t√¢che\"\n}"
            },
            "url": "{{baseUrl}}/taches/{{task_id}}/changer-statut",
            "description": "üîÑ Permissions: responsable OU porteur projet"
          }
        },
        {
          "name": "Historique Statuts (NOUVEAU)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/taches/{{task_id}}/historique-statuts",
            "description": "üìã NOUVEAU: Historique complet t√¢ches"
          }
        }
      ]
    },
    {
      "name": "üè¢ GESTION UTILISATEURS",
      "item": [
        {
          "name": "Lister Entit√©s",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/entites",
            "description": "üè¢ Toutes les entit√©s"
          }
        },
        {
          "name": "Utilisateurs Entit√© (NOUVEAU)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/entites/1/utilisateurs?statut=actuel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "entites",
                "1",
                "utilisateurs"
              ],
              "query": [
                {
                  "key": "statut",
                  "value": "actuel"
                }
              ]
            },
            "description": "üë• NOUVEAU: Endpoint avec filtres avanc√©s"
          }
        },
        {
          "name": "Lister Utilisateurs",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/users",
            "description": "üë• Tous les utilisateurs"
          }
        },
        {
          "name": "Lister R√¥les",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/roles",
            "description": "üé≠ Tous les r√¥les"
          }
        },
        {
          "name": "Lister Permissions",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/permissions",
            "description": "üîê Toutes les permissions (3 nouvelles)"
          }
        }
      ]
    },
    {
      "name": "üí¨ DISCUSSIONS & FICHIERS",
      "item": [
        {
          "name": "Discussions Projet",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/projets/{{project_id}}/discussions",
            "description": "üí¨ Messages du projet"
          }
        },
        {
          "name": "Poster Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Test message via API\",\n  \"parent_id\": null\n}"
            },
            "url": "{{baseUrl}}/projets/{{project_id}}/discussions",
            "description": "üí¨ Nouveau message"
          }
        },
        {
          "name": "Fichiers Projet",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/projets/{{project_id}}/pieces-jointes",
            "description": "üìé Documents projet"
          }
        },
        {
          "name": "Discussions T√¢che",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/taches/{{task_id}}/discussions",
            "description": "üí¨ Messages t√¢che"
          }
        }
      ]
    },
    {
      "name": "üìä R√âF√âRENTIELS",
      "item": [
        {
          "name": "Types de Projets",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/type-projets",
            "description": "üìä Types avec SLA"
          }
        },
        {
          "name": "Types d'Entit√©s",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/type-entites",
            "description": "üè¢ Types organisationnels"
          }
        },
        {
          "name": "Postes",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/postes",
            "description": "üíº Tous les postes"
          }
        }
      ]
    }
  ]
}