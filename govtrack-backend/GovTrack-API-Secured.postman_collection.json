{
	"info": {
		"_postman_id": "govtrack-api-partie2-complete",
		"name": "GovTrack API - COMPLET (Partie 1 + 2)",
		"description": "Collection compl√®te pour l'API GovTrack incluant la gestion des utilisateurs et la gestion des instructions/recommandations avec discussions et pi√®ces jointes",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{ACCESS_TOKEN}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"exec": [
					"// V√©rifier si on a un token d'auth (sauf pour login)",
					"if (pm.request.url.getPath().indexOf('/auth/login') === -1) {",
					"    if (!pm.globals.get('auth_token')) {",
					"        console.log('‚ö†Ô∏è Token d\\'authentification manquant. Ex√©cutez d\\'abord POST /auth/login');",
					"    }",
					"}"
				],
				"type": "text/javascript"
			}
		}
	],
	"variable": [
		{
			"key": "BASE_URL",
			"value": "http://127.0.0.1:8000/api/v1",
			"type": "string"
		},
		{
			"key": "ACCESS_TOKEN",
			"value": "",
			"type": "string"
		},
		{
			"key": "USER_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "PROJET_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "TACHE_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "TYPE_PROJET_ID",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üîê Authentification",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (responseCode.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('ACCESS_TOKEN', jsonData.access_token);",
									"    pm.collectionVariables.set('USER_ID', jsonData.user.id);",
									"    pm.test('Login successful', function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@govtrack.gov\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/auth/login",
							"host": ["{{BASE_URL}}"],
							"path": ["auth", "login"]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/auth/logout",
							"host": ["{{BASE_URL}}"],
							"path": ["auth", "logout"]
						}
					}
				},
				{
					"name": "Profile",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/auth/profile",
							"host": ["{{BASE_URL}}"],
							"path": ["auth", "profile"]
						}
					}
				}
			]
		},
		{
			"name": "üìã Types de Projets (SLA)",
			"item": [
				{
					"name": "Cr√©er Type de Projet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (responseCode.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('TYPE_PROJET_ID', jsonData.data.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nom\": \"Instruction Urgente\",\n    \"description\": \"Instructions urgentes n√©cessitant une r√©ponse rapide\",\n    \"duree_previsionnelle_jours\": 7,\n    \"description_sla\": \"D√©lai de 7 jours pour les instructions urgentes\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/type-projets",
							"host": ["{{BASE_URL}}"],
							"path": ["type-projets"]
						}
					}
				},
				{
					"name": "Lister Types de Projets",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/type-projets",
							"host": ["{{BASE_URL}}"],
							"path": ["type-projets"]
						}
					}
				},
				{
					"name": "Voir Type de Projet",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/type-projets/{{TYPE_PROJET_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["type-projets", "{{TYPE_PROJET_ID}}"]
						}
					}
				},
				{
					"name": "Statistiques Type de Projet",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/type-projets/{{TYPE_PROJET_ID}}/statistiques",
							"host": ["{{BASE_URL}}"],
							"path": ["type-projets", "{{TYPE_PROJET_ID}}", "statistiques"]
						}
					}
				},
				{
					"name": "Modifier Type de Projet",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nom\": \"Instruction Urgente Modifi√©e\",\n    \"description\": \"Instructions urgentes avec description mise √† jour\",\n    \"duree_previsionnelle_jours\": 10,\n    \"description_sla\": \"D√©lai √©tendu √† 10 jours\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/type-projets/{{TYPE_PROJET_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["type-projets", "{{TYPE_PROJET_ID}}"]
						}
					}
				}
			]
		},
		{
			"name": "üìä Projets (Instructions/Recommandations)",
			"item": [
				{
					"name": "Cr√©er Projet avec SLA Auto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (responseCode.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('PROJET_ID', jsonData.data.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"titre\": \"Digitalisation des Processus\",\n    \"description\": \"Mise en place d'un syst√®me de digitalisation des processus administratifs pour am√©liorer l'efficacit√©\",\n    \"type_projet_id\": {{TYPE_PROJET_ID}},\n    \"porteur_id\": {{USER_ID}},\n    \"donneur_ordre_id\": {{USER_ID}},\n    \"date_debut_previsionnelle\": \"2025-01-15\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets",
							"host": ["{{BASE_URL}}"],
							"path": ["projets"]
						}
					}
				},
				{
					"name": "Cr√©er Projet avec Dates Personnalis√©es",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"titre\": \"Formation du Personnel\",\n    \"description\": \"Programme de formation complet pour tout le personnel sur les nouvelles proc√©dures\",\n    \"type_projet_id\": {{TYPE_PROJET_ID}},\n    \"porteur_id\": {{USER_ID}},\n    \"donneur_ordre_id\": {{USER_ID}},\n    \"date_debut_previsionnelle\": \"2025-01-20\",\n    \"date_fin_previsionnelle\": \"2025-03-15\",\n    \"justification_modification_dates\": \"D√©lai √©tendu n√©cessaire pour coordonner avec tous les d√©partements et organiser les sessions de formation\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets",
							"host": ["{{BASE_URL}}"],
							"path": ["projets"]
						}
					}
				},
				{
					"name": "Lister Projets",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets?per_page=10&sort_by=date_creation&sort_order=desc",
							"host": ["{{BASE_URL}}"],
							"path": ["projets"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "sort_by",
									"value": "date_creation"
								},
								{
									"key": "sort_order",
									"value": "desc"
								}
							]
						}
					}
				},
				{
					"name": "Voir Projet D√©taill√©",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}"]
						}
					}
				},
				{
					"name": "Tableau de Bord Projets",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/tableau-bord",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "tableau-bord"]
						}
					}
				},
				{
					"name": "Changer Statut Projet",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nouveau_statut\": \"en_cours\",\n    \"commentaire\": \"D√©marrage officiel du projet apr√®s validation des ressources\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/changer-statut",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "changer-statut"]
						}
					}
				},
				{
					"name": "Modifier Projet",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"titre\": \"Digitalisation des Processus - Phase 1\",\n    \"description\": \"Premi√®re phase de la digitalisation focusing sur les processus critiques\",\n    \"type_projet_id\": {{TYPE_PROJET_ID}},\n    \"porteur_id\": {{USER_ID}},\n    \"donneur_ordre_id\": {{USER_ID}},\n    \"date_debut_previsionnelle\": \"2025-01-15\",\n    \"date_fin_previsionnelle\": \"2025-01-25\",\n    \"niveau_execution\": 25\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}"]
						}
					}
				}
			]
		},
		{
			"name": "‚úÖ T√¢ches",
			"item": [
				{
					"name": "Cr√©er T√¢che",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (responseCode.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('TACHE_ID', jsonData.data.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"titre\": \"Analyse des Besoins\",\n    \"description\": \"Analyser les besoins sp√©cifiques de chaque d√©partement pour la digitalisation\",\n    \"projet_id\": {{PROJET_ID}},\n    \"responsable_id\": {{USER_ID}},\n    \"date_debut_previsionnelle\": \"2025-01-15\",\n    \"date_fin_previsionnelle\": \"2025-01-20\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/taches",
							"host": ["{{BASE_URL}}"],
							"path": ["taches"]
						}
					}
				},
				{
					"name": "Lister T√¢ches",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/taches?projet_id={{PROJET_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["taches"],
							"query": [
								{
									"key": "projet_id",
									"value": "{{PROJET_ID}}"
								}
							]
						}
					}
				},
				{
					"name": "Mes T√¢ches",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/taches/mes-taches",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "mes-taches"]
						}
					}
				},
				{
					"name": "Voir T√¢che",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}"]
						}
					}
				},
				{
					"name": "Changer Statut T√¢che",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nouveau_statut\": \"en_cours\",\n    \"commentaire\": \"D√©but de l'analyse des besoins\",\n    \"niveau_execution\": 10\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}/changer-statut",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}", "changer-statut"]
						}
					}
				},
				{
					"name": "Modifier T√¢che",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"titre\": \"Analyse Approfondie des Besoins\",\n    \"description\": \"Analyse d√©taill√©e des besoins avec consultation des √©quipes\",\n    \"responsable_id\": {{USER_ID}},\n    \"date_debut_previsionnelle\": \"2025-01-15\",\n    \"date_fin_previsionnelle\": \"2025-01-22\",\n    \"niveau_execution\": 30\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}"]
						}
					}
				}
			]
		},
		{
			"name": "üìé Pi√®ces Jointes Projets",
			"item": [
				{
					"name": "Upload Pi√®ce Jointe Normale",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "fichier",
									"type": "file",
									"src": "/path/to/your/file.pdf"
								},
								{
									"key": "description",
									"value": "Document de sp√©cifications techniques",
									"type": "text"
								},
								{
									"key": "est_justificatif",
									"value": "false",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/pieces-jointes",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "pieces-jointes"]
						}
					}
				},
				{
					"name": "Upload Justificatif",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "fichier",
									"type": "file",
									"src": "/path/to/your/justificatif.pdf"
								},
								{
									"key": "description",
									"value": "Justificatif de cl√¥ture du projet",
									"type": "text"
								},
								{
									"key": "est_justificatif",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/pieces-jointes",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "pieces-jointes"]
						}
					}
				},
				{
					"name": "Lister Pi√®ces Jointes",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/pieces-jointes",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "pieces-jointes"]
						}
					}
				},
				{
					"name": "Statistiques Pi√®ces Jointes",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/pieces-jointes/statistiques",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "pieces-jointes", "statistiques"]
						}
					}
				}
			]
		},
		{
			"name": "üìé Pi√®ces Jointes T√¢ches",
			"item": [
				{
					"name": "Upload Pi√®ce Jointe T√¢che",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "fichier",
									"type": "file",
									"src": "/path/to/your/file.pdf"
								},
								{
									"key": "description",
									"value": "Document de travail pour la t√¢che",
									"type": "text"
								},
								{
									"key": "est_justificatif",
									"value": "false",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}/pieces-jointes",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}", "pieces-jointes"]
						}
					}
				},
				{
					"name": "Lister Pi√®ces Jointes T√¢che",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}/pieces-jointes",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}", "pieces-jointes"]
						}
					}
				}
			]
		},
		{
			"name": "üí¨ Discussions Projets",
			"item": [
				{
					"name": "Poster Message Principal",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"D√©but du projet de digitalisation. Merci √† tous de bien vouloir partager vos id√©es et commentaires pour assurer le succ√®s de cette initiative.\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/discussions",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "discussions"]
						}
					}
				},
				{
					"name": "R√©pondre √† un Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Excellente initiative ! Je sugg√®re de commencer par une phase pilote avec le d√©partement IT.\",\n    \"parent_id\": 1\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/discussions",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "discussions"]
						}
					}
				},
				{
					"name": "Lister Discussions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/discussions",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "discussions"]
						}
					}
				},
				{
					"name": "Statistiques Discussions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/projets/{{PROJET_ID}}/discussions/statistiques",
							"host": ["{{BASE_URL}}"],
							"path": ["projets", "{{PROJET_ID}}", "discussions", "statistiques"]
						}
					}
				}
			]
		},
		{
			"name": "üí¨ Discussions T√¢ches",
			"item": [
				{
					"name": "Poster Message T√¢che",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Analyse en cours. J'aurai besoin de clarifications sur les sp√©cifications techniques pour le d√©partement comptabilit√©.\"\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}/discussions",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}", "discussions"]
						}
					}
				},
				{
					"name": "Lister Discussions T√¢che",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/taches/{{TACHE_ID}}/discussions",
							"host": ["{{BASE_URL}}"],
							"path": ["taches", "{{TACHE_ID}}", "discussions"]
						}
					}
				}
			]
		},
		{
			"name": "üë• Gestion Utilisateurs (Partie 1)",
			"item": [
				{
					"name": "Lister Utilisateurs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/users",
							"host": ["{{BASE_URL}}"],
							"path": ["users"]
						}
					}
				},
				{
					"name": "Cr√©er Utilisateur",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"matricule\": \"EMP001\",\n    \"nom\": \"Diallo\",\n    \"prenom\": \"Mamadou\",\n    \"email\": \"mamadou.diallo@govtrack.gov\",\n    \"telephone\": \"+221771234567\",\n    \"adresse\": \"Dakar, S√©n√©gal\",\n    \"statut\": true\n}"
						},
						"url": {
							"raw": "{{BASE_URL}}/users",
							"host": ["{{BASE_URL}}"],
							"path": ["users"]
						}
					}
				}
			]
		}
	]
}
